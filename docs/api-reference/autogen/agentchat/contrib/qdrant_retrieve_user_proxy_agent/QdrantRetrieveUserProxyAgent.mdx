---
sidebarTitle: QdrantRetrieveUserProxyAgent
title: autogen.agentchat.contrib.qdrant_retrieve_user_proxy_agent.QdrantRetrieveUserProxyAgent
---
<h2 id="autogen.agentchat.contrib.qdrant_retrieve_user_proxy_agent.QdrantRetrieveUserProxyAgent" class="doc doc-heading">
    <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>
    <span class="doc doc-object-name doc-class-name">QdrantRetrieveUserProxyAgent</span>
</h2>

```python
QdrantRetrieveUserProxyAgent(**kwargs)
```

    (In preview) The Retrieval-Augmented User Proxy retrieves document chunks based on the embedding
    similarity, and sends them along with the question to the Retrieval-Augmented Assistant

<b>Parameters:</b>
| Name | Description |
|--|--|
| `**kwargs` | other kwargs in [UserProxyAgent](/docs/api-reference/autogen/UserProxyAgent#userproxyagent).<br/><br/> |

### Class Attributes

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### DEFAULT_CONFIG
<br />

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### DEFAULT_SUMMARY_METHOD
<br />

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### DEFAULT_SUMMARY_PROMPT
<br />

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### DEFAULT_USER_PROXY_AGENT_DESCRIPTIONS
<br />

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### MAX_CONSECUTIVE_AUTO_REPLY
<br />

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_check_termination_and_human_reply
<br />

    (async) Check if the conversation should be terminated, and if human reply is provided.<br/>This method checks for conditions that require the conversation to be terminated, such as reaching
    a maximum number of consecutive auto-replies or encountering a termination message. Additionally,
    it prompts for and processes human input based on the configured human input mode, which can be
    'ALWAYS', 'NEVER', or 'TERMINATE'. The method also manages the consecutive auto-reply counter
    for the conversation and prints relevant messages based on the human input received.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_execute_function
<br />

    Execute an async function call and return the result.<br/>Override this function to modify the way async functions and tools are executed.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_generate_function_call_reply
<br />

    Generate a reply using async function call.<br/>"function_call" replaced by "tool_calls" as of [OpenAI API v1.1.0](https://github.com/openai/openai-python/releases/tag/v1.1.0)
    See https://platform.openai.com/docs/api-reference/chat/create#chat-create-functions

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_generate_init_message
<br />

    Generate the initial message for the agent.<br/>If message is None, input() will be called to get the initial message.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_generate_oai_reply
<br />

    Generate a reply using autogen.oai asynchronously.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_generate_reply
<br />

    (async) Reply based on the conversation history and the sender.<br/>Either messages or sender must be provided.<br/>Register a reply_func with `None` as one trigger for it to be activated when `messages` is non-empty and `sender` is `None`.<br/>Use registered auto reply functions to generate replies.<br/>By default, the following functions are checked in order: <br/>1. check_termination_and_human_reply
    2. generate_function_call_reply
    3. generate_tool_calls_reply
    4. generate_code_execution_reply
    5. generate_oai_reply
    Every function returns a tuple (final, reply).<br/>When a function returns final=False, the next function will be checked.<br/>So by default, termination and human reply will be checked first.<br/>If not terminating and human reply is skipped, execute function or code and return the result.<br/>AI replies are generated only when no code execution is performed.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_generate_tool_calls_reply
<br />

    Generate a reply using async function call.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_get_human_input
<br />

    (Async) Get human input.<br/>Override this method to customize the way to get human input.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_initiate_chat
<br />

    (async) Initiate a chat with the recipient agent.<br/>Reset the consecutive auto reply counter.<br/>If `clear_history` is True, the chat history with the recipient agent will be cleared.<br/>`a_generate_init_message` is called to generate the initial message for the agent.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_initiate_chats
<br />

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_receive
<br />

    (async) Receive a message from another agent.<br/>Once a message is received, this function sends a reply to the sender or stop.<br/>The reply can be generated automatically or entered manually by a human.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_run
<br />

    Run a chat asynchronously with the agent using the given message.<br/>A second agent will be created to represent the user, this agent will by known by the name 'user'.<br/>The user can terminate the conversation when prompted or, if agent's reply contains 'TERMINATE', it will terminate.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### a_send
<br />

    (async) Send a message to another agent.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### can_execute_function
<br />

    Whether the agent can execute the function.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### chat_messages_for_summary
<br />

    A list of messages as a conversation to summarize.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### check_termination_and_human_reply
<br />

    Check if the conversation should be terminated, and if human reply is provided.<br/>This method checks for conditions that require the conversation to be terminated, such as reaching
    a maximum number of consecutive auto-replies or encountering a termination message. Additionally,
    it prompts for and processes human input based on the configured human input mode, which can be
    'ALWAYS', 'NEVER', or 'TERMINATE'. The method also manages the consecutive auto-reply counter
    for the conversation and prints relevant messages based on the human input received.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### clear_history
<br />

    Clear the chat history of the agent.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### execute_code_blocks
<br />

    Execute the code blocks and return the result.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### execute_function
<br />

    Execute a function call and return the result.<br/>Override this function to modify the way to execute function and tool calls.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### generate_code_execution_reply
<br />

    Generate a reply using code execution.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### generate_function_call_reply
<br />

    Generate a reply using function call.<br/>"function_call" replaced by "tool_calls" as of [OpenAI API v1.1.0](https://github.com/openai/openai-python/releases/tag/v1.1.0)
    See https://platform.openai.com/docs/api-reference/chat/create#chat-create-functions

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### generate_init_message
<br />

    Generate the initial message for the agent.<br/>If message is None, input() will be called to get the initial message.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### generate_oai_reply
<br />

    Generate a reply using autogen.oai.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### generate_reply
<br />

    Reply based on the conversation history and the sender.<br/>Either messages or sender must be provided.<br/>Register a reply_func with `None` as one trigger for it to be activated when `messages` is non-empty and `sender` is `None`.<br/>Use registered auto reply functions to generate replies.<br/>By default, the following functions are checked in order: <br/>1. check_termination_and_human_reply
    2. generate_function_call_reply (deprecated in favor of tool_calls)
    3. generate_tool_calls_reply
    4. generate_code_execution_reply
    5. generate_oai_reply
    Every function returns a tuple (final, reply).<br/>When a function returns final=False, the next function will be checked.<br/>So by default, termination and human reply will be checked first.<br/>If not terminating and human reply is skipped, execute function or code and return the result.<br/>AI replies are generated only when no code execution is performed.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### generate_tool_calls_reply
<br />

    Generate a reply using tool call.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### get_actual_usage
<br />

    Get the actual usage summary.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### get_chat_results
<br />

    A summary from the finished chats of particular agents.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### get_context
<br />

    Get a context variable by key.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### get_human_input
<br />

    Get human input.<br/>Override this method to customize the way to get human input.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### get_max_tokens
<br />

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### get_total_usage
<br />

    Get the total usage summary.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### initiate_chat
<br />

    Initiate a chat with the recipient agent.<br/>Reset the consecutive auto reply counter.<br/>If `clear_history` is True, the chat history with the recipient agent will be cleared.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### initiate_chats
<br />

    (Experimental) Initiate chats with multiple agents.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### last_message
<br />

    The last message exchanged with the agent.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### max_consecutive_auto_reply
<br />

    The maximum number of consecutive auto replies.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### message_generator
<br />

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### pop_context
<br />

    Remove and return a context variable.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### print_usage_summary
<br />

    Print the usage summary.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### process_all_messages_before_reply
<br />

    Calls any registered capability hooks to process all messages, potentially modifying the messages.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### process_last_received_message
<br />

    Calls any registered capability hooks to use and potentially modify the text of the last message,
    as long as the last message is not a function call or exit command.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### receive
<br />

    Receive a message from another agent.<br/>Once a message is received, this function sends a reply to the sender or stop.<br/>The reply can be generated automatically or entered manually by a human.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### register_for_execution
<br />

    Decorator factory for registering a function to be executed by an agent.<br/>It's return value is used to decorate a function to be registered to the agent.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### register_for_llm
<br />

    Decorator factory for registering a function to be used by an agent.<br/>It's return value is used to decorate a function to be registered to the agent. The function uses type hints to
    specify the arguments and return type. The function name is used as the default name for the function,
    but a custom name can be provided. The function description is used to describe the function in the
    agent's configuration.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### register_function
<br />

    Register functions to the agent.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### register_hook
<br />

    Registers a hook to be called by a hookable method, in order to add a capability to the agent.<br/>Registered hooks are kept in lists (one per hookable method), and are called in their order of registration.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### register_model_client
<br />

    Register a model client.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### register_nested_chats
<br />

    Register a nested chat reply function.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### register_reply
<br />

    Register a reply function.<br/>The reply function will be called when the trigger matches the sender.<br/>The function registered later will be checked earlier by default.<br/>To change the order, set the position to a positive integer.<br/>Both sync and async reply functions can be registered. The sync reply function will be triggered
    from both sync and async chats. However, an async reply function will only be triggered from async
    chats (initiated with `ConversableAgent.a_initiate_chat`). If an `async` reply function is registered
    and a chat is initialized with a sync function, `ignore_async_in_sync_chat` determines the behaviour as follows: <br/>    if `ignore_async_in_sync_chat` is set to `False` (default value), an exception will be raised, and
        if `ignore_async_in_sync_chat` is set to `True`, the reply function will be ignored.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### remove_tool_for_llm
<br />

    Remove a tool (register for LLM tool)

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### replace_reply_func
<br />

    Replace a registered reply function with a new one.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### reset
<br />

    Reset the agent.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### reset_consecutive_auto_reply_counter
<br />

    Reset the consecutive_auto_reply_counter of the sender.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### retrieve_docs
<br />

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### run
<br />

    Run a chat with the agent using the given message.<br/>A second agent will be created to represent the user, this agent will by known by the name 'user'. This agent does not have code execution enabled by default, if needed pass the code execution config in with the executor_kwargs parameter.<br/>The user can terminate the conversation when prompted or, if agent's reply contains 'TERMINATE', it will terminate.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### run_code
<br />

    Run the code and return the result.<br/>Override this function to modify the way to run the code.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### send
<br />

    Send a message to another agent.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### set_context
<br />

    Set a context variable.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### stop_reply_at_receive
<br />

    Reset the reply_at_receive of the sender.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### update_agent_state_before_reply
<br />

    Calls any registered capability hooks to update the agent's state.<br/>Primarily used to update context variables.<br/>Will, potentially, modify the messages.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### update_context
<br />

    Update multiple context variables at once.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### update_function_signature
<br />

    Update a function_signature in the LLM configuration for function_call.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### update_max_consecutive_auto_reply
<br />

    Update the maximum number of consecutive auto replies.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### update_system_message
<br />

    Update the system message.<br/>

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### update_tool_signature
<br />

    Update a tool_signature in the LLM configuration for tool_call.<br/>

### Instance Attributes

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### chat_messages
<br />

    A dictionary of conversations from agent to list of messages.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### code_executor
<br />

    The code executor used by this agent. Returns None if code execution is disabled.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### description
<br />

    Get the description of the agent.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### function_map
<br />

    Return the function map.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### name
<br />

    Get the name of the agent.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### system_message
<br />

    Return the system message.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### tools
<br />

    Get the agent's tools (registered for LLM)
    
    Note this is a copy of the tools list, use add_tool and remove_tool to modify the tools list.

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### use_docker
<br />

    Bool value of whether to use docker to execute the code,
    or str value of the docker image name to use, or None when code execution is disabled.