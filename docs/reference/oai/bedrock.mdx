---
sidebarTitle: bedrock
title: autogen.oai.bedrock
---

## Functions

<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>
#### calculate_cost
<a href="#autogen.oai.bedrock..calculate_cost" class="headerlink" title="Permanent link"></a>

```python
calculate_cost(
    input_tokens: int,
    output_tokens: int,
    model_id: str
) -> float
```

    Calculate the cost of the completion using the Bedrock pricing.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `input_tokens` | **Type:** `int` |
| `output_tokens` | **Type:** `int` |
| `model_id` | **Type:** `str` |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>
#### convert_stop_reason_to_finish_reason
<a href="#autogen.oai.bedrock..convert_stop_reason_to_finish_reason" class="headerlink" title="Permanent link"></a>

```python
convert_stop_reason_to_finish_reason(stop_reason: str) -> Literal['stop', 'length', 'tool_calls', 'content_filter']
```

    Converts Bedrock finish reasons to our finish reasons, according to OpenAI:
    
    - stop: if the model hit a natural stop point or a provided stop sequence,
    - length: if the maximum number of tokens specified in the request was reached,
    - content_filter: if content was omitted due to a flag from our content filters,
    - tool_calls: if the model called a tool

<b>Parameters:</b>
| Name | Description |
|--|--|
| `stop_reason` | **Type:** `str` |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>
#### extract_system_messages
<a href="#autogen.oai.bedrock..extract_system_messages" class="headerlink" title="Permanent link"></a>

```python
extract_system_messages(messages: list[dict]) -> list
```

    Extract the system messages from the list of messages.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `messages` | List of messages.<br/><br/>**Type:** `list[dict]` |

<b>Returns:</b>
| Type | Description |
|--|--|
| `list` | List[SystemMessage]: List of System messages. |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>
#### format_tool_calls
<a href="#autogen.oai.bedrock..format_tool_calls" class="headerlink" title="Permanent link"></a>

```python
format_tool_calls(content) -> 
```

    Converts Converse API response tool calls to AutoGen format

<b>Parameters:</b>
| Name | Description |
|--|--|
| `content` |  |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>
#### format_tools
<a href="#autogen.oai.bedrock..format_tools" class="headerlink" title="Permanent link"></a>

```python
format_tools(tools: list[dict[str, Any]]) -> dict[typing.Literal['tools'], list[dict[str, typing.Any]]]
```

    

<b>Parameters:</b>
| Name | Description |
|--|--|
| `tools` | **Type:** `list[dict[str, Any]]` |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>
#### oai_messages_to_bedrock_messages
<a href="#autogen.oai.bedrock..oai_messages_to_bedrock_messages" class="headerlink" title="Permanent link"></a>

```python
oai_messages_to_bedrock_messages(
    messages: list[dict[str, Any]],
    has_tools: bool,
    supports_system_prompts: bool
) -> list[dict]
```

    Convert messages from OAI format to Bedrock format.
    We correct for any specific role orders and types, etc.
    AWS Bedrock requires messages to alternate between user and assistant roles. This function ensures that the messages
    are in the correct order and format for Bedrock by inserting "Please continue" messages as needed.
    This is the same method as the one in the Autogen Anthropic client

<b>Parameters:</b>
| Name | Description |
|--|--|
| `messages` | **Type:** `list[dict[str, Any]]` |
| `has_tools` | **Type:** `bool` |
| `supports_system_prompts` | **Type:** `bool` |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>
#### parse_content_parts
<a href="#autogen.oai.bedrock..parse_content_parts" class="headerlink" title="Permanent link"></a>

```python
parse_content_parts(message: dict[str, Any]) -> list[dict]
```

    

<b>Parameters:</b>
| Name | Description |
|--|--|
| `message` | **Type:** `dict[str, Any]` |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>
#### parse_image
<a href="#autogen.oai.bedrock..parse_image" class="headerlink" title="Permanent link"></a>

```python
parse_image(image_url: str) -> tuple[bytes, str]
```

    Try to get the raw data from an image url.
    
    Ref: https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_ImageSource.html
    returns a tuple of (Image Data, Content Type)

<b>Parameters:</b>
| Name | Description |
|--|--|
| `image_url` | **Type:** `str` |

<br />

    <h2 id="autogen.oai.bedrock.BedrockClient" class="doc doc-heading">
        <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>
        <span class="doc doc-object-name doc-class-name">BedrockClient</span>
        <a href="#autogen.oai.bedrock.BedrockClient" class="headerlink" title="Permanent link"></a>
    </h2>

```python
BedrockClient(**kwargs)
```

    Client for Amazon's Bedrock Converse API.
    
    Initialises BedrockClient for Amazon's Bedrock Converse API

<b>Parameters:</b>
| Name | Description |
|--|--|
| `**kwargs` |  |

### Class Attributes

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### cost
<a href="#autogen.oai.bedrock.BedrockClient.cost" class="headerlink" title="Permanent link"></a>

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### create
<a href="#autogen.oai.bedrock.BedrockClient.create" class="headerlink" title="Permanent link"></a>

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### get_usage
<a href="#autogen.oai.bedrock.BedrockClient.get_usage" class="headerlink" title="Permanent link"></a>

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### message_retrieval
<a href="#autogen.oai.bedrock.BedrockClient.message_retrieval" class="headerlink" title="Permanent link"></a>

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### parse_custom_params
<a href="#autogen.oai.bedrock.BedrockClient.parse_custom_params" class="headerlink" title="Permanent link"></a>

    <br />

<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>
#### parse_params
<a href="#autogen.oai.bedrock.BedrockClient.parse_params" class="headerlink" title="Permanent link"></a>

    <br />